### Report for OSH-Lab2
#### Xu-Yuanyuan  PB20511899  2022/5/7

------

#### Shell部分

- 实现功能：

  - 必做项目：（8分）

    - 正确处理含有 1 个管道的命令（1 分）
      - 正确处理含有多个管道的命令（1 分）
    - 支持 `>`, `>>`, `<` 重定向（各 0.5 分）
    - 在遇到 `Ctrl-C` 信号时不会中断 （0.5 分）
      - 在遇到 `Ctrl-C` 时能丢弃已经输入一半的命令行，显示提示符并重新接受输入（1 分）
    - 你的 shell 支持 `history n`命令（1 分）
      - 你的 shell 支持通过 `!n` 和 `!!` 命令（各 1 分）

  - 选做功能：（≤2分）

    - 将历史命令持久化，新打开的 shell 能使用之前保留的记录（1 分）

      > 我将history保留在我的shell.c所在目录下的一个名为`.history`的文件里
      >
      > 1. 因为fopen的打开方式选择所以需要这个文件一定存在（不要求为空）
      > 2. 我已经在提交文件里附带了一个空文件，但是助教如果将文件转移测试请再新建一个`。history`文件

    - 处理 Ctrl-D (EOF) 按键（0.5 分)

    - 支持 Bash 风格的 TCP 重定向(1 分）

      > 支持如：/dev/stdin、/dev/stdout、/dev/stderr之类的命令
      >
      > 对于tcp做的测试还不够充分，还有一些小问题，我后续修正

    - 支持`echo $SHELL`命令 （0.5 分）

      > 即基于环境变量的处理，我的处理标识符就是`$`

#### tiny strace部分

参照[文档](https://man7.org/linux/man-pages/man2/ptrace.2.html)和这篇[文章](https://nullprogram.com/blog/2018/06/23/)完成了`strace.c`的编写

检验的时候自己有一点疑惑，不知道怎么确认数值的正确性

1. 程序运行和bash的strace的行数一致（除了系统的第一行有execvel）；
2. 多数的寄存器结果都一致，但是少数是动态的没法完全检验；

